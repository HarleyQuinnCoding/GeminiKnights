let selectedDiets = [];

document.querySelectorAll('.diet').forEach((checkbox) => {
  checkbox.addEventListener('change', () => {
    const value = checkbox.value;

    if (checkbox.checked) {
      if (!selectedDiets.includes(value)) {
        selectedDiets.push(value);
      }
    } else {
      selectedDiets = selectedDiets.filter(item => item !== value);
    }

    console.log("Selected dietary restrictions:", selectedDiets);
  });
});

function sendToAI(ingredients) {
  const data = {
    ingredients: ingredients,
    dietaryRestrictions: selectedDiets
  };

  fetch('/api/recipe', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(data)
  }).then(res => res.json())
    .then(result => {
      console.log("AI response:", result);
    });
}
